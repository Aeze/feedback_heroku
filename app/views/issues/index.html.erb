<%- model_class = Issue -%>
<h1><%= model_class.model_name.human.pluralize %></h1>
<p>When reporting a bug, we would like you to take the time and search the forum to see if your issue is already reported. While we won't delete duplicate reports, it will save us time if you know the issue is already posted and do not repost it. Using keywords (such as a unique element of a crash log or an ability name) is a good way to find threads. </p>

<%= link_to 'New', new_issue_path, :class => 'btn' %>

<div ng-controller="IssuesCtrl">

<form action="" class="forms">
    <label>
        <input class="width-50" ng-model="qSearch" type="text" name="search" placeholder="Search for an issue" />
    </label>
</form>

<nav class="navbar">
    <ul ng-init="selectedOption = 'all'">
      <li><button ng-click="buttonFilter = null; selectedOption = 'all';"class="btn" ng-class="{'btn-green':selectedOption === 'all'}">All Types</button></li>
      <li><button ng-click="buttonFilter = {issue_type: 'Bug Report'}; selectedOption = 'bugs';" class="btn" ng-class="{'btn-green':selectedOption === 'bugs'}">Bug Reports</button></li>
      <li><button ng-click="buttonFilter = {issue_type: 'Feature Request'}; selectedOption = 'features';"class="btn" ng-class="{'btn-green':selectedOption === 'features'}">Feature Requests</button></li>
    </ul>
</nav>

<table class="striped">
  <thead class="thead-black">
    <tr>
      <th>Votes</th>
      <th>Issue</th>
      <th>Type</th>
      <th><%= model_class.human_attribute_name(:description) %></th>
      <th><%= model_class.human_attribute_name(:created_at) %></th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="issue in issues | fuzzyFilter:qSearch | filter:buttonFilter">
      <td><h5 class="text-centered">{{issue.upvotes}}</h5></td>
      <td><a href="{{issue.url}}">{{issue.name}}</a></td>
      <td>{{issue.issue_type}}</td>
      <td>{{issue.description}}</td>
      <td>{{issue.created_at}}</td>
      <td>{{issue.open}}</td>
    </tr>
  </tbody>
</table>
</div>
